This branch is concerned with code cleanups.
It sits on top of Mark Huot's graphical refresh.
